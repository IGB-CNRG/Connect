{% extends 'base.html.twig' %}

{% block title %}{{ parent() }} | Entry Form{% endblock %}

{% block breadcrumb %}
    <li class="breadcrumb-item active" aria-current="page">
        <a href="{{ path('membership_approvals', {'slug': person.slug}) }}">Membership Approvals</a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">
        {{ person.name }} Entry Request Form
    </li>
{% endblock %}

{% block content %}
    {# TODO rework this for multiple themes, sponsors, supervisors #}
    <div class="row">
        <div class="col-lg">
            <p class="approval-label">{{ 'person.firstName'|trans }}</p>
            <p class="approval-field">{{ person.firstName }}</p>
        </div>
        <div class="col-lg">
            <p class="approval-label">{{ 'person.lastName'|trans }}</p>
            <p class="approval-field">{{ person.lastName }}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-lg">
            <p class="approval-label">{{ 'person.netid'|trans }}</p>
            <p class="approval-field">{{ person.netid }}</p>
        </div>
        <div class="col-lg">
            <p class="approval-label">{{ 'person.uin'|trans }}</p>
            <p class="approval-field">{{ person.uin }}</p>
        </div>
        <div class="col-lg">
            <p class="approval-label">{{ 'person.email'|trans }}</p>
            <p class="approval-field">{{ person.email }}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-lg">
            <p class="approval-label">{{ 'entry_form.room'|trans }}</p>
            <p class="approval-field">{{ person.roomAffiliations|length>0 ? person.roomAffiliations[0].room : '' }}</p>
        </div>
        <div class="col-lg">
            <p class="approval-label">{{ 'entry_form.phone'|trans }}</p>
            <p class="approval-field">{{ person.officePhone|phone_number }}</p>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <p class="approval-label">Office work only?</p>
            <p class="approval-field">{{ person.officeWorkOnly ? 'Yes' : 'No' }}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-lg">
            <p class="approval-label">{{ 'entry_form.unit'|trans }}</p>
            <p class="approval-field">{{ person.unit??person.otherUnit??'' }}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-lg">
            <p class="approval-label">{{ 'entry_form.supervisor'|trans }}</p>
            <p class="approval-field">{{ person.supervisorAffiliations|length>0 ? person.supervisorAffiliations[0].supervisor : '' }}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-lg">
            <p class="approval-label">{{ 'person.theme'|trans }}</p>
            <p class="approval-field">{{ person.themeAffiliations|length > 0 ? person.themeAffiliations[0].theme.shortName }}</p>
        </div>
        <div class="col-lg">
            <p class="approval-label">{{ 'entry_form.member_category'|trans }}</p>
            <p class="approval-field">{{ person.themeAffiliations|length > 0 ? person.themeAffiliations[0].memberCategory }}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-lg">
            <p class="approval-label">{{ 'person.started_at'|trans }}</p>
            <p class="approval-field">{% if person.themeAffiliations|length>0 and person.themeAffiliations[0].startedAt is not null %}{{ person.themeAffiliations[0].startedAt|date('n/j/Y') }}{% endif %}</p>
        </div>
        <div class="col-lg">
            <p class="approval-label">{{ 'person.ended_at'|trans }}</p>
            <p class="approval-field">{% if person.themeAffiliations|length>0 and person.themeAffiliations[0].endedAt is not null %}{{ person.themeAffiliations[0].endedAt|date('n/j/Y') }}{% endif %}</p>
        </div>
    </div>

    <hr/>

    {% if person.membershipNote %}
        <div class="callout callout-border-info">
        <p>This entry form was previously returned to the new IGB member with the following reason:</p>
        <p class="ms-2">{{ person.membershipNote }}</p>
        </div>
    {% endif %}

    {# todo need better wording from Darci #}
    <div class="d-flex">
            <div class="p-2" style="flex:1">
                <p>Check the box below to approve this entry form</p>
                {{ form(approvalForm) }}
            </div>
            <div class="flex-grow-0 p-2"><strong>OR</strong></div>
            <div class="p-2" style="flex:1">{{ form(rejectionForm) }}</div>
    </div>
{% endblock %}
